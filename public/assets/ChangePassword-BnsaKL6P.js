import{G as w,_ as y,p as i,o as m,c as V,w as r,a as s,e as o,h as b,i as x,t as g,j as C,l as k,s as B,b as I,V as N}from"./index-D8apdIrF.js";import{V as P,c as _}from"./VCard-BzsTKAXT.js";import{V as v}from"./VTextField-gAq9Whng.js";const j=async(d,a)=>{try{const{data:t}=await w.patch("usuarios/cambiar-contrasenia",{contrasenia:d,contraseniaNueva:a});return t}catch{throw new Error("error updating password")}},h={key:0,class:"mensaje text-center"},z={__name:"ChangePassword",setup(d){const a=i(""),t=i(""),l=i(""),n=i(!1),p=()=>{n.value=!n.value},f=async()=>{if(!t.value||!l.value){a.value="Ambos campos son obligatorios.";return}try{await j(t.value,l.value)?(a.value="Contraseña cambiada con éxito.",t.value="",l.value=""):a.value="No se pudo actualizar la contraseña."}catch(u){console.error(u),a.value="Hubo un error al intentar cambiar la contraseña."}};return(u,e)=>(m(),V(N,{class:"mt-16",justify:"center"},{default:r(()=>[s(I,{cols:"12",class:"d-flex justify-center"},{default:r(()=>[s(P,{class:"pa-8 mb-8"},{default:r(()=>[s(_,{class:"d-flex align-center"},{default:r(()=>e[2]||(e[2]=[o("h1",{class:"text-h5 font-weight-bold mb-0"},"Cambiar contraseña",-1)])),_:1}),s(b),a.value?(m(),x("div",h,g(a.value),1)):C("",!0),e[6]||(e[6]=o("br",null,null,-1)),o("form",{onSubmit:B(f,["prevent"])},[o("div",null,[e[3]||(e[3]=o("p",{class:"texto"},"Introduzca la contraseña actual:",-1)),s(v,{modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=c=>t.value=c),ref:"currentPasswordRef","append-inner-icon":n.value?"mdi-eye-off":"mdi-eye",type:n.value?"text":"password",density:"compact",placeholder:"Ingresa tu contraseña actual","prepend-inner-icon":"mdi-lock-outline",variant:"outlined",class:"custom-text-field",autocomplete:"current-password","onClick:appendInner":p},null,8,["modelValue","append-inner-icon","type"])]),o("div",null,[e[4]||(e[4]=o("p",{class:"texto"},"Nueva contraseña:",-1)),s(v,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=c=>l.value=c),ref:"newPasswordRef","append-inner-icon":n.value?"mdi-eye-off":"mdi-eye",type:n.value?"text":"password",density:"compact",placeholder:"Ingresa tu nueva contraseña","prepend-inner-icon":"mdi-lock-outline",variant:"outlined",class:"custom-text-field",autocomplete:"new-password","onClick:appendInner":p},null,8,["modelValue","append-inner-icon","type"])]),s(k,{type:"submit",class:"mb-8",color:"yellow",size:"large",variant:"elevated",block:""},{default:r(()=>e[5]||(e[5]=[o("div",{class:"textBtn"},"Cambiar contraseña",-1)])),_:1})],32)]),_:1})]),_:1})]),_:1}))}},E=y(z,[["__scopeId","data-v-c2c6fe80"]]);export{E as default};
