import{u as z}from"./useQuery-Ico0mqlw.js";import{u as G}from"./useMutation-BcsYU11w.js";import{G as S,d as Q,x as R,p as T,N as D,Q as p,S as K,T as f,_ as L,r as M,o as g,c as O,w as l,a as n,V as P,b as w,e as r,i as x,t as H,j as J,g as W,E as b,l as X,v as Y}from"./index-D8apdIrF.js";import{C as Z,u as h}from"./CustomInput-Psgnhk9x.js";import{V as _}from"./VCard-BzsTKAXT.js";import"./useQueryClient-CA8bKV2U.js";const ee=async o=>{if(o==null||o==="create")return{id:"",nombre:"",correo_electronico:"",telefono:"",contrasenia:""};try{const{data:e}=await S.get(`/entrenadores/${o}`);return e}catch(e){throw console.log("Ocurrio un error",e),new Error("No se pudo realizar la peticion")}},oe=async o=>{try{const{contrasenia:e,...u}=o,a=o.id,{data:m}=await S.patch(`/entrenadores/editar/${a}`,u);return m}catch{throw new Error("Error updating coach")}},re=K({nombre:f().required(),correo_electronico:f().required(),telefono:f().required()}),te=Q({components:{CustomInput:Z},props:{idCoach:{type:String,required:!0}},setup(o){const e=R(),u=T(""),{data:a,isError:m,isLoading:v,refetch:i}=z({queryKey:["coach",o.idCoach],queryFn:()=>ee(o.idCoach),retry:!1}),{mutate:t,isSuccess:j,data:y}=G({mutationFn:oe}),{values:A,errors:E,defineField:c,resetForm:V,handleSubmit:$}=h({validationSchema:re}),[k,I]=c("nombre"),[N,q]=c("correo_electronico"),[B,F]=c("telefono"),U=$(async s=>{t(s)});return D(()=>{m.value&&!v.value&&e.replace("/admin/instructores/lista-instructores")}),p(a,()=>{var s,d;!a.value||!((s=a.value)!=null&&s.data)||V({values:(d=a.value)==null?void 0:d.data})},{deep:!0,immediate:!0}),p(j,s=>{var d,C;s&&(u.value="Coach actualizado correctamente",e.replace(`/admin/instructores/lista-instructores/${(C=(d=y.value.data)==null?void 0:d.data)==null?void 0:C.id}`),V({values:y.value}))}),p(()=>o.idCoach,()=>{i()}),{values:A,mensaje:u,errors:E,nombre:k,nombreAttrs:I,correo_electronico:N,correo_electronicoAttrs:q,telefono:B,telefonoAttrs:F,onSubmit:U}}}),ne={key:0,class:"mensaje text-center"};function ae(o,e,u,a,m,v){const i=M("CustomInput");return g(),O(Y,{fluid:"",class:"login-container"},{default:l(()=>[n(P,null,{default:l(()=>[n(w,{cols:"12",md:"12",class:"d-flex justify-center md:justify-center"},{default:l(()=>e[4]||(e[4]=[r("h1",null,"Instructor",-1)])),_:1}),n(w,{cols:"12",md:"12",class:"d-flex justify-center md:justify-center"},{default:l(()=>[n(_,{class:"pa-6 pa-md-12 pb-8 mr-md-32",style:{"background-color":"black",opacity:"0.8","margin-top":"20px"},elevation:"8",rounded:"lg",width:"500","max-width":"800px"},{default:l(()=>[o.mensaje?(g(),x("div",ne,H(o.mensaje),1)):J("",!0),e[12]||(e[12]=W()),e[13]||(e[13]=r("br",null,null,-1)),r("form",{onSubmit:e[3]||(e[3]=(...t)=>o.onSubmit&&o.onSubmit(...t))},[e[6]||(e[6]=r("div",{class:"texto"},"Nombre del Instructor",-1)),n(i,b({modelValue:o.nombre,"onUpdate:modelValue":e[0]||(e[0]=t=>o.nombre=t)},o.nombreAttrs,{error:o.errors.nombre,icon:"mdi-account"}),null,16,["modelValue","error"]),e[7]||(e[7]=r("br",null,null,-1)),e[8]||(e[8]=r("div",{class:"texto"},"Numero telefonico",-1)),n(i,b({modelValue:o.telefono,"onUpdate:modelValue":e[1]||(e[1]=t=>o.telefono=t)},o.telefonoAttrs,{error:o.errors.telefono,icon:"mdi-phone"}),null,16,["modelValue","error"]),e[9]||(e[9]=r("br",null,null,-1)),e[10]||(e[10]=r("div",{class:"texto"},"Correo electronico",-1)),e[11]||(e[11]=r("br",null,null,-1)),n(i,b({modelValue:o.correo_electronico,"onUpdate:modelValue":e[2]||(e[2]=t=>o.correo_electronico=t)},o.correo_electronicoAttrs,{error:o.errors.correo_Electronico,icon:"mdi-email"}),null,16,["modelValue","error"]),n(X,{type:"submit",class:"mb-8",color:"black",size:"large",variant:"tonal",block:""},{default:l(()=>e[5]||(e[5]=[r("div",{class:"texto"},"Editar membresia",-1)])),_:1})],32)]),_:1})]),_:1})]),_:1})]),_:1})}const ce=L(te,[["render",ae],["__scopeId","data-v-ac932aee"]]);export{ce as default};
